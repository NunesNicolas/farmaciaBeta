<app-header></app-header>

<div class="filter-container">
      <h3 style="text-align: center;">Filtrar Produtos</h3>
  <div class="filter-form">

    
    <div class="filter-group">
      <label for="category">Categoria:</label>
      <select id="category" [(ngModel)]="selectedCategory" (change)="applyFilters()">
        <option value="">Todas as Categorias</option>
        <option value="medicamento">Medicamentos</option>
        <option value="cosmetico">Cosméticos</option>
        <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
      </select>
    </div>

    <div class="filter-group">
      <label for="minPrice">Preço Mínimo:</label>
      <input type="number" id="minPrice" [(ngModel)]="minPrice" placeholder="0" (change)="applyFilters()" min="0" step="0.01">
    </div>

    <div class="filter-group">
      <label for="maxPrice">Preço Máximo:</label>
      <input type="number" id="maxPrice" [(ngModel)]="maxPrice" placeholder="9999" (change)="applyFilters()" min="0" step="0.01">
    </div>
  </div>
  <div class="filter-actions">
      <button class="btn btn-primary" (click)="applyFilters()">Aplicar Filtros</button>
      <button class="btn btn-secondary" (click)="clearFilters()">Limpar Filtros</button>
    </div>
</div>

<div class="products-container">
  <app-card-item *ngFor="let product of products" [product]="product"></app-card-item>
</div>

<div *ngIf="errMessage" class="error-message">
  {{ errMessage }}
</div>

<div *ngIf="products.length === 0" class="no-products-message">
  Nenhum produto encontrado com os filtros aplicados.
</div>

<div class="pagination-container">
  <nav class="pagination-nav" aria-label="Paginação de produtos">
    <button 
      class="pagination-btn pagination-btn--prev" 
      (click)="prevPage()" 
      [disabled]="currentPage === 1"
      aria-label="Página anterior">
      <svg class="pagination-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
      Anterior
    </button>

    <div class="pagination-numbers">
      <button 
        *ngFor="let page of getPageNumbers()" 
        class="pagination-number"
        [class.active]="page === currentPage"
        [class.ellipsis]="page === -1"
        [disabled]="page === -1"
        (click)="page !== -1 && loadProducts(page)"
        [attr.aria-label]="'Ir para página ' + page"
        [attr.aria-current]="page === currentPage ? 'page' : null">
        {{ page === -1 ? '...' : page }}
      </button>
    </div>

    <button 
      class="pagination-btn pagination-btn--next" 
      (click)="nextPage()" 
      [disabled]="currentPage === lastPage"
      aria-label="Próxima página">
      Próximo
      <svg class="pagination-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
      </svg>
    </button>
  </nav>

  <div class="pagination-info">
    <span>Página {{ currentPage }} de {{ lastPage }}</span>
    <span class="pagination-total">{{ products.length }} produtos</span>
  </div>
</div>
